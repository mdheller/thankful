"use strict";var app=angular.module("thankfulApp",["ngCookies","ngResource","ngRoute","ui.bootstrap"]);app.config(["$routeProvider",function(a){OAuth.initialize("kcvGCQdBDvMf0TvEwkxK2UE-22g"),a.when("/signin",{templateUrl:"views/signin.html",controller:"SigninCtrl"}).when("/home",{templateUrl:"views/home.html",controller:"HomeCtrl"}).when("/post",{templateUrl:"views/post.html",controller:"PostCtrl"}).otherwise({redirectTo:"/home"})}]),app.directive("contenteditable",function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){function e(){var a=b.html();c.stripBr&&"<br>"==a&&(a=""),d.$setViewValue(a)}d&&(d.$render=function(){b.html(d.$viewValue||c.placeholder||"")},b.on("blur keyup change",function(){a.$apply(e)}),b.on("click",function(){b.html()==c.placeholder&&b.html("")}))}}});var thank0={to:"facebook.com/joe",from:"twitter.com/utunga",text:"Hey, thanks for the help with the garden last weekend, joe",image:"_1.jpg"},thank1={to:"twitter.com/utunga",from:"facebook.com/joe",text:"Lift to the airport was much appreciated.",image:"_2.jpg"},thank2={to:"facebook.com/sarah",from:"facebook.com/joe",text:"Owe you a beer mate. Dunno what I could do without you.",image:"_3.jpg"},thanks=[thank0,thank1,thank2],testData={};testData.thanks=thanks;var app=angular.module("thankfulApp");app.service("settings",["$rootScope",function(){this.apiVersion="0.5",this.apiHost="",this.apiRoot=function(){return this.apiHost+"/api/"+this.apiVersion}}]),app.factory("ThankYou",["$resource","settings",function(a,b){return a(b.apiRoot()+"/thanks/:thank_id",{thank_id:"@id"})}]),angular.module("thankfulApp").controller("SigninCtrl",["$scope","$http","$rootScope",function(a,b,c){c.user=c.user||{},a.signinFacebook=function(){OAuth.popup("facebook",function(a,b){a||(c.loggedIn=!0,b.get("/me").done(function(a){c.user.name=a.name,c.user.facebook=a,c.$apply()}))})},a.signinTwitter=function(){OAuth.popup("twitter",function(a,b){a||(c.loggedIn=!0,b.get("/1.1/account/verify_credentials.json").done(function(a){c.user.name=a.name,c.user.twitter=a,c.$apply()}))})}}]),angular.module("thankfulApp").controller("HomeCtrl",["$scope","ThankYou",function(a,b){b.query({},function(b){a.thanks=b}),a.createSampleData=function(){var a=new b(testData.thanks[0]);a.$save(),a=new b(testData.thanks[1]),a.$save(),a=new b(testData.thanks[2]),a.$save()}}]),angular.module("thankfulApp").controller("PostCtrl",["$scope","$rootScope","$location","ThankYou",function(a,b,c,d){function e(){return b.loggedIn?b.user.name:"Once people login this auto fills"}a.model={to:"",from:e(),text:"",image:"_2.jpg"},a.save=function(){var b=new d(a.model);b.$save().then(function(){c.path("/home")})}}]);